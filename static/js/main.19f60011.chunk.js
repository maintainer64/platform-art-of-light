(this["webpackJsonpbts-ui"]=this["webpackJsonpbts-ui"]||[]).push([[0],{156:function(e,t,n){},158:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(37),c=n.n(r),s=n(12),o=n.n(s),l=n(17),u=n(11),d=n(7),j=n(68),b=n(14),f=(n(155),n(156),n(20)),m=n(193),x=n(1),h=function(e){var t=e.rows,n=e.onSelect,i=Object(a.useState)(""),r=Object(u.a)(i,2),c=r[0],s=r[1],o=Object(a.useState)(t),l=Object(u.a)(o,2),j=l[0],b=l[1];Object(a.useEffect)((function(){b(function(e){var n=e.toLowerCase();return t.filter((function(e){return e.name.toLowerCase().indexOf(n)>-1}))}(c))}),[t,c]);var f=function(e){"function"===typeof n&&n(e)};return Object(x.jsxs)(d.k,{separator:"hide",mode:"plain",children:[Object(x.jsx)(d.r,{value:c,onChange:function(e){s(e.target.value)}}),Object(x.jsxs)("div",{className:"scrolling-cell",children:[j.length>0&&j.map((function(e){return Object(x.jsx)(d.d,{onClick:f.bind(undefined,e.id),children:e.name},e.id)})),0===j.length&&Object(x.jsx)(d.f,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})]})},p=n(40),O=n(191),v=n(189),g=n(190),k=n(200),C=(n(158),"/platform-art-of-light/map-leaflet/"),S=function(e){var t=e.maps;return Object(x.jsx)("div",{onClick:function(){t.zoomIn()},className:"zoom-top-bar-up zoom-top-bar-btn",children:Object(x.jsx)("img",{src:C+"plus.svg",alt:"PlusZoom"})})},y=function(e){var t=e.maps;return Object(x.jsx)("div",{onClick:function(){t.zoomOut()},className:"zoom-top-bar-down zoom-top-bar-btn",children:Object(x.jsx)("img",{src:C+"minus.svg",alt:"MinusZoom"})})},w=function(e){var t=e.maps;return Object(x.jsxs)("div",{className:"zoom-top-bar",children:[Object(x.jsx)(S,{maps:t}),Object(x.jsx)(y,{maps:t})]})},N=function(e){var t=e.handler;return Object(x.jsx)("div",{onClick:t,className:"to-image-btn btn-my-location",children:Object(x.jsx)("img",{src:C+"find.svg",alt:"MyLocation"})})},_=function(){var e=Object(v.a)();return Object(x.jsx)(w,{maps:e})},I=function(){var e=Object(v.b)({locationfound:function(t){e.flyTo(t.latlng,e.getZoom(),{animate:!1})}});return Object(x.jsx)(N,{handler:function(){e.locate()}})},M=function(e){var t=e.className,n=e.height,a=e.children;return Object(x.jsxs)(g.a,{zoomControl:!1,style:{height:n},className:"CustomMaps "+t,center:[37.3257279,-122.0372682],zoom:13,scrollWheelZoom:!1,children:[Object(x.jsx)(_,{}),Object(x.jsx)(I,{}),Object(x.jsx)(k.a,{boxZoom:!0,attribution:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a]})},L=void 0,z=function(e){var t=e.onConfirm,n=e.onClose;return Object(x.jsx)(d.a,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",autoclose:!0,mode:"destructive",action:t}],actionsLayout:"horizontal",onClose:n,header:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",text:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435?"})},A=function(e){var t=e.name,n=e.min,a=e.max;return Object(x.jsxs)(d.i,{mode:"horizontal",children:[Object(x.jsx)(d.g,{top:t,bottom:"Min",children:Object(x.jsx)(d.l,{defaultValue:n.value,getRef:n.ref})}),Object(x.jsx)(d.g,{top:"...",bottom:"Max",children:Object(x.jsx)(d.l,{defaultValue:a.value,getRef:a.ref})})]})},V=function(e){var t=e.name,n=e.setName;if(e.isUpdated)return t;return Object(x.jsx)("div",{style:{paddingLeft:"16px"},children:Object(x.jsx)(d.l,{onChange:function(e){n(e.target.value)}.bind(L),placeholder:t})})},J=function(e){var t=e.id,n=e.name,r=e.onSave,c=e.onDelete,s=e.data,o=e.buttonLoadingState,l=e.globalSetModalView,j=null!==t&&void 0!==t,b=Object(a.useState)(!1),f=Object(u.a)(b,2),m=f[0],h=f[1],v=Object(a.useState)({ref_dats:null,components:null}),g=Object(u.a)(v,2),k=g[0],C=g[1],S=Object(a.useState)(t),y=Object(u.a)(S,2),w=y[0],N=y[1],_=[["light","\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043e\u0441\u0432\u0435\u0449\u0435\u043d\u0438\u044f",{type:"int"}],["Tamb_degC","Tamb_degC",{type:"int"}],["latitude","latitude",{type:"float"}],["longitude","longitude",{type:"float"}]];Object(a.useEffect)((function(){if(null===s)return!0;var e=function(e){return function(e){var t,n=[],a=Object(p.a)(_);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push({name:r[1],min:{ref:i.a.createRef(),value:e[r[0]].min},max:{ref:i.a.createRef(),value:e[r[0]].max}})}}catch(c){a.e(c)}finally{a.f()}return n}(function(e){if(null===e||void 0===e){var t,n={min:"",max:""},a={},i=Object(p.a)(_);try{for(i.s();!(t=i.n()).done;)a[t.value[0]]=n}catch(r){i.e(r)}finally{i.f()}return a}return e}(e))}(s),t=e.map((function(e,t){return Object(x.jsx)(A,{name:e.name,min:e.min,max:e.max},t)}));C({ref_dats:e,components:t})}),[s,o]);var I=function(){"function"===typeof c&&c(t)},J={open:function(){l(Object(x.jsx)(z,{onClose:J.close.bind(L),onConfirm:I.bind(L)}))},close:function(){l(null)}},R=null===k.components?Object(x.jsx)(d.t,{size:"large"}):Object(x.jsxs)(d.h,{children:[m?Object(x.jsx)(d.j,{header:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",mode:"error",children:m}):null,k.components,Object(x.jsx)(d.g,{children:Object(x.jsx)(M,{height:"400px"})}),Object(x.jsx)(d.g,{children:Object(x.jsx)(d.c,{disabled:o,onClick:function(){var e=t,n=function(e){for(var t=function(e,t){var n=!1,a=void 0;return"int"===e.type&&(a=parseInt(t),n=isNaN(a)?"\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0446\u0435\u043b\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c":n),"float"===e.type&&(a=parseFloat(t),n=isNaN(a)?"\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u043c":n),n?[void 0,n]:void 0!==e.min&&a<e.min?[void 0,"\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 "+e.min.toString()]:void 0!==e.max&&a>e.max?[void 0,"\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 "+e.max.toString()]:[a,!1]},n={},a=0;a<e.length;a++){var i=_[a],r=t(i[2],e[a].min.ref.current.value),c=Object(u.a)(r,2),s=c[0],o=c[1];if(!1!==o)return h("\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 '"+i[1]+"' "+o),null;var l=t(i[2],e[a].max.ref.current.value),d=Object(u.a)(l,2),j=d[0],b=d[1];if(!1!==b)return h("\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 '"+i[1]+"' "+b),null;n[i[0]]={min:s,max:j}}return h(!1),n}(k.ref_dats);j||(e=function(e){return"string"===typeof e&&e.toString().trim().length>0?(h(!1),e.toString().trim()):(h("\u0418\u0434\u0435\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d"),null)}(w)),void 0!==n&&null!==n&&null!==e&&void 0!==e&&"function"===typeof r&&r(n,e)},size:"l",stretched:!0,children:o?Object(x.jsx)(d.t,{size:"small"}):void 0===s?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})})]});return Object(x.jsxs)(d.k,{separator:"hide",mode:"plain",children:[Object(x.jsx)(d.o,{fixed:!1,separator:!1,left:j?Object(x.jsx)(d.p,{onClick:J.open.bind(L),children:Object(x.jsx)(O.a,{})}):null,children:Object(x.jsx)(V,{name:n,isUpdated:j,setName:function(e){N(e)}})}),Object(x.jsx)("div",{className:"scrolling-form",children:R})]})},R=n(66),T=n.n(R),E=n(36),q=(T.a.create({headers:{"Content-type":"application/json"},withCredentials:!0}),"/platform-art-of-light");function D(){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(o.a.mark((function e(){var t,n,a,i,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={grothendieck:{light:{min:0,max:1},Tamb_degC:{min:-10,max:10},latitude:{min:56.84212,max:56.842133},longitude:{min:60.652065,max:60.6520653}},haibt:{light:{min:15,max:20},Tamb_degC:{min:-10,max:10},latitude:{min:57.974659,max:57.9746598},longitude:{min:59.955707,max:59.9557073}},hellman:{light:{min:0,max:100},Tamb_degC:{min:-30,max:30},latitude:{min:56.844204,max:56.8442044},longitude:{min:60.653715,max:60.6537157}}},n=0,a=Object.entries(t);case 2:if(!(n<a.length)){e.next=9;break}return i=Object(u.a)(a[n],2),r=i[0],c=i[1],e.next=6,E.a.setItem("mocks_get_"+r,JSON.stringify(c));case 6:n++,e.next=2;break;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return U.apply(this,arguments)}function U(){return(U=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("MocksGetIds get"),e.next=3,E.a.getItem("mocks_get");case 3:if(null===(t=e.sent)||void 0===t){e.next=6;break}return e.abrupt("return",JSON.parse(t));case 6:return e.next=8,D();case 8:return e.abrupt("return",["grothendieck","haibt","hellman"]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return G.apply(this,arguments)}function G(){return(G=Object(l.a)(o.a.mark((function e(t){var n,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.info("MocksGetInfo get by ids="+t),n=[],a=0;case 3:if(!(a<t.length)){e.next=17;break}return e.prev=4,e.next=7,E.a.getItem("mocks_get_"+t[a]);case 7:i=e.sent,n.push(Object(f.a)({id:t[a]},JSON.parse(i))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:a++,e.next=3;break;case 17:return console.log("MocksGetInfo get",n),e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function W(){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("Mocks get"),e.next=3,P();case 3:return t=e.sent,e.next=6,Z(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("Mocks set by id="+t),e.next=3,P();case 3:if(-1!==(a=e.sent).indexOf(t)){e.next=8;break}return a.push(t),e.next=8,E.a.setItem("mocks_get",JSON.stringify(a));case 8:return e.next=10,E.a.setItem("mocks_get_"+t,JSON.stringify(n));case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.removeItem("mocks_get_"+t);case 2:return e.next=4,P();case 4:if(n=e.sent,-1===(a=n.indexOf(t))){e.next=10;break}return n.slice(a,0),e.next=10,E.a.setItem("mocks_get",JSON.stringify(n));case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","\u0410\u0434\u0440\u0435\u0441 \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){function t(e,t){return Math.random()*(t-e)+e}return{data:{name:e.id.toString(),id:e.id.toString()},command:{level_light:t(e.light.min,e.light.max)},status:{},influx:{ICCID:e.id.toString(),Tamb_degC:Math.ceil(t(e.Tamb_degC.min,e.Tamb_degC.max)),latitude:t(e.latitude.min,e.latitude.max),level_light:100,light:t(e.light.min,e.light.max),longitude:t(e.longitude.min,e.longitude.max)}}}function $(){return ee.apply(this,arguments)}function ee(){return(ee=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return t=e.sent,n=t.map((function(e){return X(e)})),console.log("LastTelemetriesSensors",n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(l.a)(o.a.mark((function e(t,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",200);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=n(192),ae=function(e){var t=e.onClick;return Object(x.jsx)(d.h,{children:Object(x.jsx)(d.k,{separator:"hide",mode:"plain",children:Object(x.jsx)("div",{className:"scrolling-form-no-header",children:Object(x.jsxs)(d.q,{icon:Object(x.jsx)(ne.a,{}),stretched:!0,children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0438\u043b\u0438 ",Object(x.jsx)(d.m,{onClick:t,href:"#",children:"\u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})})})})},ie=function(e){var t=e.id,n=e.globalSetModalView,i={view:!1,data:null,id:null,buttonLoadingState:!1,name:null},r=Object(a.useState)([]),c=Object(u.a)(r,2),s=c[0],j=c[1],b=Object(a.useState)([]),p=Object(u.a)(b,2),O=p[0],v=p[1],g=Object(a.useState)(i),k=Object(u.a)(g,2),C=k[0],S=k[1],y=function(e){if(null!==e){var t=s.find((function(t){return t.id===e.toString()})),n=JSON.parse(JSON.stringify(C));n.data=t,n.name=t.id,n.id=t.id,n.view=!0,S(n)}else S(Object(f.a)(Object(f.a)({},i),{},{name:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430",data:void 0,view:!0}))};return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:null!==(t=e.sent)&&void 0!==t&&Array.isArray(t)&&j(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){var e=s.map((function(e){return{id:e.id.toString(),name:e.id.toString()}}));v(e)}),[s]),Object(x.jsxs)(d.n,{id:t,children:[Object(x.jsx)(d.o,{children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(x.jsxs)("div",{className:"mocks_wrapper",children:[Object(x.jsx)("div",{className:"left",children:Object(x.jsx)(h,{after:Object(x.jsx)("div",{className:"ddd",children:Object(x.jsx)(m.a,{})}),onSelect:y,rows:O})}),Object(x.jsx)("div",{className:"right",children:C.view?Object(x.jsx)(J,{id:C.id,name:C.name,data:C.data,onDelete:function(e){S(i);var t=s.findIndex((function(t){return t.id===e.toString()}));-1!==t&&(s.splice(t,1),j(JSON.parse(JSON.stringify(s)))),function(e){return Y.apply(this,arguments)}(e).then()},onSave:function(e,t){var n=C.id!==t;S(n?{view:!0,id:t,name:t,data:e,buttonLoadingState:!0}:Object(f.a)(Object(f.a)({},C),{},{buttonLoadingState:!0})),function(e,t){return H.apply(this,arguments)}(t,e).then((function(a){if(!0===a){var i=n?t:C.name;S({view:!0,id:t,name:i,data:e,buttonLoadingState:!1});var r=s.findIndex((function(e){return e.id===t.toString()}));-1!==r?s[r]=Object(f.a)({id:t},e):s.unshift(Object(f.a)(Object(f.a)({id:t},e),{},{name:t})),j([]),j(s)}}))},globalSetModalView:n,buttonLoadingState:C.buttonLoadingState}):Object(x.jsx)(ae,{onClick:y.bind(undefined,null)})})]})]})},re=n(35),ce=(n(177),n(178),n(195)),se=n(196),oe=n(197),le=n(194),ue=n(44),de=void 0;function je(e){var t=document.querySelector("#link-to");t.href=e,t.click()}var be=function(e){var t=e.onClick,n=e.collapsed;return Object(x.jsx)("div",{onClick:t,className:"CompanyNameSidebarMenu",children:Object(x.jsx)(d.e,{children:Object(x.jsx)("h1",{children:n?Object(x.jsx)(le.a,{}):"Art of Light"})})})},fe=function(){var e=Object(a.useState)(function(){var e=ue.a.getItem("menuCollapsed");return null!==e&&(e=e.toString()),"true"!==e&&"false"!==e&&(ue.a.setItem("menuCollapsed","false"),e="false"),"true"===e}()),t=Object(u.a)(e,2),n=t[0],i=t[1],r=function(e){i(e),function(e){ue.a.setItem("menuCollapsed",e?"true":"false")}(e)};return Object(x.jsx)(re.c,{collapsed:n,width:270,className:"left-menu-sidebar",children:Object(x.jsx)(re.a,{iconShape:null,children:Object(x.jsxs)("div",{className:"container-menu",children:[Object(x.jsx)(be,{collapsed:n,onClick:function(){r(!n)}}),Object(x.jsx)(re.b,{onClick:je.bind(de,q+"/#/"),icon:Object(x.jsx)(ce.a,{}),children:"\u041a\u0430\u0440\u0442\u0430"}),Object(x.jsx)(re.b,{icon:Object(x.jsx)(se.a,{}),children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432"}),Object(x.jsxs)(re.d,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",icon:Object(x.jsx)(oe.a,{}),children:[Object(x.jsx)(re.b,{onClick:je.bind(de,q+"/#/mocks-settings/"),children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(x.jsx)(re.b,{children:"\u041f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430"})]}),Object(x.jsx)(d.f,{children:Object(x.jsxs)("div",{children:["v 0.1",Object(x.jsx)("a",{id:"link-to",href:"#",style:{display:"none"}})]})})]})})})},me=n(199),xe=n(31),he=n.n(xe),pe=(n(179),"/platform-art-of-light/map-markers/"),Oe=new he.a.Icon({iconUrl:pe+"default.svg",iconRetinaUrl:pe+"default.svg",iconAnchor:null,popupAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:new he.a.Point(60,67),className:"leaflet-custom-icon"}),ve=n(198),ge=(n(180),n(181),n(67)),ke=n(21),Ce=n.n(ke),Se=void 0,ye=function(e){var t=e.checked,n=e.disabled,a=e.setChecked;return Object(x.jsxs)("div",{className:"auto-light",children:[Object(x.jsx)("div",{className:"auto-light__text",children:"\u0410\u0432\u0442\u043e\u044f\u0440\u043a\u043e\u0441\u0442\u044c"}),Object(x.jsx)("div",{className:"auto-light__switch",children:Object(x.jsx)(d.u,{disabled:n,onChange:a.bind(Se,!t),defaultChecked:t,value:t})})]})},we=function(e){var t=e.disabled,n=e.value,a=e.setValue;return Object(x.jsx)("div",{className:"level_light_control",children:Object(x.jsx)(d.g,{top:Object(x.jsx)("div",{className:"text",children:"\u042f\u0440\u043a\u043e\u0441\u0442\u044c"}),children:Object(x.jsx)(d.s,{disabled:t,min:0,max:100,step:1,value:n,onChange:function(e){return a(e)}})})})},Ne=function(e){var t=e.temperature;return Object(x.jsxs)("div",{className:"auto-light",children:[Object(x.jsx)("div",{className:"text-temp",children:"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u043d\u0430 \u0443\u043b\u0438\u0446\u0435"}),Object(x.jsxs)("div",{className:"temperature",children:[t.toFixed(0)," \xb0\u0421"]})]})},_e=function(e){var t=e.name,n=e.min,a=e.max,i=e.value;return Object(x.jsx)("div",{className:"level_light_control indicator",children:Object(x.jsx)(d.g,{top:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"text",children:t}),Object(x.jsxs)("div",{className:"text__bottom",children:[i," / ",a]})]}),children:Object(x.jsx)(d.s,{disabled:!0,min:n,max:a,value:i})})})},Ie=function(e){var t=e.min,n=e.max,a=e.value;return Object(x.jsx)(_e,{name:"\u0420\u0435\u0441\u0443\u0440\u0441 \u043b\u0430\u043c\u043f\u044b",min:t,max:n,value:a})},Me=function(e){var t=e.min,n=e.max,a=e.value;return Object(x.jsx)(_e,{name:"\u0420\u0435\u0441\u0443\u0440\u0441 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430",min:t,max:n,value:a})},Le=function(e){var t=e.lat,n=e.lng,i=Object(a.useState)(null),r=Object(u.a)(i,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t+","+n,void 0===window.FunctionCustomLoadAddress&&(window.FunctionCustomLoadAddress={}),void 0==window.FunctionCustomLoadAddress[a]){e.next=6;break}s(window.FunctionCustomLoadAddress[a]),e.next=12;break;case 6:return s(Object(x.jsx)(d.t,{size:"small"})),e.next=9,K(t,n);case 9:i=e.sent,window.FunctionCustomLoadAddress[a]=i,s(i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(x.jsx)("div",{className:"meta",children:Object(x.jsxs)(d.d,{disabled:!0,children:[Object(x.jsx)("div",{style:{overflowY:"scroll"},className:"info-marker",children:c}),Object(x.jsxs)("div",{className:"info-marker",children:[t.toFixed(4),", ",n.toFixed(4),Object(x.jsx)(ge.CopyToClipboard,{text:t+", "+n,children:Object(x.jsx)("span",{className:"info-marker-copy",children:Object(x.jsx)("img",{src:"/platform-art-of-light/map-leaflet/copy.svg",alt:"Copy.svg"})})})]})]})})},ze=function(e){var t=e.id,n=e.value,a=e.onChange;return Object(x.jsx)("div",{className:"header",children:Object(x.jsx)(d.d,{disabled:!0,after:Object(x.jsx)(d.u,{value:n,defaultChecked:n,onChange:a.bind(Se,!n)}),children:Object(x.jsxs)("h1",{children:["ID ",t]})})})},Ae=function(e){var t=e.light,n=e.temperature,a=e.autoLight;return Object(x.jsx)("div",{className:"settings",children:Object(x.jsxs)(d.d,{disabled:!0,children:[Object(x.jsx)(ye,{disabled:a.disabled,checked:a.checked,setChecked:a.setChecked}),Object(x.jsx)(we,{disabled:t.disabled,value:t.value,setValue:t.setValue}),Object(x.jsx)(Ne,{temperature:n.temperature}),Object(x.jsx)(Ie,{max:500,value:300,min:0}),Object(x.jsx)(Me,{max:5e3,value:300,min:0})]})})},Ve=(Ce.a.shape({latitude:Ce.a.number.isRequired,longitude:Ce.a.number.isRequired}).isRequired,Ce.a.number.isRequired,Ce.a.instanceOf([Ce.a.number,Ce.a.string]).isRequired,Ce.a.bool.isRequired,Ce.a.number.isRequired,function(e){var t=e.data,n=e.onChangeCommand,i=Object(a.useState)(!0),r=Object(u.a)(i,2),c=r[0],s=r[1],o=Object(a.useState)(!0),l=Object(u.a)(o,2),j=l[0],b=l[1],f=Object(a.useState)(!1),m=Object(u.a)(f,2),h=m[0],p=m[1],O=function(e){I(e),n({auto:!e.disabled,level:void 0===e.value?0:e.value})},v=function(e){b(e),O({value:_.value,disabled:e})},g=Object(a.useState)(!0),k=Object(u.a)(g,2),C=k[0],S=k[1],y=function(e){S(e),b(!!e&&j),O({value:e?_.value:0,disabled:!e||j}),p(!e)},w=Object(a.useState)({value:0,disabled:!0}),N=Object(u.a)(w,2),_=N[0],I=N[1];Object(a.useEffect)((function(){b(t.autoLight),S(0!==t.light),I({value:t.light,disabled:0!==t.light&&t.autoLight}),s(!1)}),[]);var M=function(){return Object(x.jsxs)(d.k,{children:[Object(x.jsx)(ze,{id:t.uuid,value:C,onChange:y}),Object(x.jsx)(Le,{lat:t.positionMarker.latitude,lng:t.positionMarker.longitude}),Object(x.jsx)(Ae,{light:{value:_.value,disabled:_.disabled,setValue:function(e){O({value:e,disabled:_.disabled})}},autoLight:{checked:j,disabled:h,setChecked:v},temperature:{temperature:t.temperature}})]})};return Object(x.jsx)("div",{className:"PopupViewMapData",children:c?Object(x.jsx)(d.t,{size:"small"}):Object(x.jsx)(M,{})})}),Je=function(e){var t=e.dataShape,n=e.onChangeCommand,a=e.onClose;return Object(x.jsx)("div",{className:"PopupSettingWrapper",children:Object(x.jsx)(ve.a,{onClose:a,position:[t.positionMarker.latitude,t.positionMarker.longitude],children:Object(x.jsx)(Ve,{data:t,onChangeCommand:n})})})},Re=void 0,Te=function(e){return null!==e&&void 0!==e},Ee=function(e){var t=e.coords,n=e.onClick;return Array.isArray(t)?t.map((function(e){return Object(x.jsx)(me.a,{icon:Oe,position:[e.latitude,e.longitude],eventHandlers:{click:n.bind(Re,e.id)}},e.id)})):null},qe=function(e){var t=e.id,n=(e.globalSetModalView,Object(a.useState)([])),i=Object(u.a)(n,2),r=i[0],c=i[1],s=Object(a.useState)([]),j=Object(u.a)(s,2),b=j[0],f=j[1],m=Object(a.useState)(null),h=Object(u.a)(m,2),O=h[0],v=h[1];Object(a.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e(),setInterval((function(){return e()}),1e4)}),[]),Object(a.useEffect)((function(){var e,t=[],n=Object(p.a)(r);try{for(n.s();!(e=n.n()).done;){var a=e.value;Te(a.influx)&&Te(a.influx.ICCID)&&Te(a.influx.longitude)&&Te(a.influx.latitude)&&t.push({id:a.influx.ICCID,longitude:a.influx.longitude,latitude:a.influx.latitude})}}catch(i){n.e(i)}finally{n.f()}f(t)}),[r]);return Object(x.jsxs)(d.n,{id:t,children:[Object(x.jsx)(d.o,{children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(x.jsx)("div",{className:"mocks_wrapper",children:Object(x.jsxs)(M,{height:"100%",children:[Object(x.jsx)(Ee,{onClick:function(e){v(!0);var t=r.findIndex((function(t){return!(!Te(t.influx)||!Te(t.influx.ICCID))&&t.influx.ICCID===e.toString()}));if(-1===t)return!1;var n=r[t],a={latitude:n.influx.latitude,longitude:n.influx.longitude};v(Object(x.jsx)(Je,{onClose:v.bind(Re,null),dataShape:{positionMarker:a,temperature:n.influx.Tamb_degC,uuid:e.toString(),autoLight:void 0===n.command.auto,light:void 0===n.command?n.influx.level_light:n.command.level_light},onChangeCommand:function(t){var n=t.auto,a=t.level;console.log({uuid:e,auto:n,level:a}),function(e,t,n){return te.apply(this,arguments)}(e,n,a).then()}}))},coords:b}),O]})})]})},De=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=(t[0],t[1]),i=Object(a.useState)(null),r=Object(u.a)(i,2),c=r[0],s=r[1];Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(null);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var f=function(e,t){return Object(x.jsx)(d.v,{activePanel:e,children:t})};return Object(x.jsx)(j.a,{basename:"/",children:Object(x.jsxs)(d.b,{children:[Object(x.jsx)(fe,{}),c,Object(x.jsxs)("div",{className:"Content",children:[Object(x.jsx)(b.a,{path:"/mocks-settings/",exact:!0,component:function(){return f("mocksSettings",Object(x.jsx)(ie,{globalSetModalView:s,id:"mocksSettings"}))}}),Object(x.jsx)(b.a,{path:"/",exact:!0,component:function(){return f("mainMap",Object(x.jsx)(qe,{globalSetModalView:s,id:"mainMap"}))}})]})]})})};c.a.render(Object(x.jsx)(De,{}),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.19f60011.chunk.js.map