(this["webpackJsonpbts-ui"]=this["webpackJsonpbts-ui"]||[]).push([[0],{155:function(e,t,n){},157:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(36),r=n.n(c),s=n(12),o=n.n(s),l=n(20),u=n(11),d=n(7),j=n(67),b=n(14),f=(n(154),n(155),n(19)),m=n(192),h=n(1),O=function(e){var t=e.rows,n=e.onSelect,i=Object(a.useState)(""),c=Object(u.a)(i,2),r=c[0],s=c[1],o=Object(a.useState)(t),l=Object(u.a)(o,2),j=l[0],b=l[1];Object(a.useEffect)((function(){b(function(e){var n=e.toLowerCase();return t.filter((function(e){return e.name.toLowerCase().indexOf(n)>-1}))}(r))}),[t,r]);var f=function(e){"function"===typeof n&&n(e)};return Object(h.jsxs)(d.k,{separator:"hide",mode:"plain",children:[Object(h.jsx)(d.r,{value:r,onChange:function(e){s(e.target.value)}}),Object(h.jsxs)("div",{className:"scrolling-cell",children:[j.length>0&&j.map((function(e){return Object(h.jsx)(d.d,{onClick:f.bind(undefined,e.id),children:e.name},e.id)})),0===j.length&&Object(h.jsx)(d.f,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})]})},p=n(39),x=n(190),v=n(188),g=n(189),C=n(199),k=(n(157),"/platform-art-of-light/map-leaflet/"),y=function(e){var t=e.maps;return Object(h.jsx)("div",{onClick:function(){t.zoomIn()},className:"zoom-top-bar-up zoom-top-bar-btn",children:Object(h.jsx)("img",{src:k+"plus.svg",alt:"PlusZoom"})})},S=function(e){var t=e.maps;return Object(h.jsx)("div",{onClick:function(){t.zoomOut()},className:"zoom-top-bar-down zoom-top-bar-btn",children:Object(h.jsx)("img",{src:k+"minus.svg",alt:"MinusZoom"})})},w=function(e){var t=e.maps;return Object(h.jsxs)("div",{className:"zoom-top-bar",children:[Object(h.jsx)(y,{maps:t}),Object(h.jsx)(S,{maps:t})]})},N=function(e){var t=e.handler;return Object(h.jsx)("div",{onClick:t,className:"to-image-btn btn-my-location",children:Object(h.jsx)("img",{src:k+"find.svg",alt:"MyLocation"})})},L=function(){var e=Object(v.a)();return Object(h.jsx)(w,{maps:e})},M=function(){var e=Object(v.b)({locationfound:function(t){e.flyTo(t.latlng,e.getZoom(),{animate:!1})}});return Object(h.jsx)(N,{handler:function(){e.locate()}})},_=function(e){var t=e.className,n=e.height,a=e.children;return Object(h.jsxs)(g.a,{zoomControl:!1,style:{height:n},className:"CustomMaps "+t,center:[37.3257279,-122.0372682],zoom:13,scrollWheelZoom:!1,children:[Object(h.jsx)(L,{}),Object(h.jsx)(M,{}),Object(h.jsx)(C.a,{boxZoom:!0,attribution:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a]})},I=void 0,z=function(e){var t=e.onConfirm,n=e.onClose;return Object(h.jsx)(d.a,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",autoclose:!0,mode:"destructive",action:t}],actionsLayout:"horizontal",onClose:n,header:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",text:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435?"})},A=function(e){var t=e.name,n=e.min,a=e.max;return Object(h.jsxs)(d.i,{mode:"horizontal",children:[Object(h.jsx)(d.g,{top:t,bottom:"Min",children:Object(h.jsx)(d.l,{defaultValue:n.value,getRef:n.ref})}),Object(h.jsx)(d.g,{top:"...",bottom:"Max",children:Object(h.jsx)(d.l,{defaultValue:a.value,getRef:a.ref})})]})},V=function(e){var t=e.name,n=e.setName;if(e.isUpdated)return t;return Object(h.jsx)("div",{style:{paddingLeft:"16px"},children:Object(h.jsx)(d.l,{onChange:function(e){n(e.target.value)}.bind(I),placeholder:t})})},R=function(e){var t=e.id,n=e.name,c=e.onSave,r=e.onDelete,s=e.data,o=e.buttonLoadingState,l=e.globalSetModalView,j=null!==t&&void 0!==t,b=Object(a.useState)(!1),f=Object(u.a)(b,2),m=f[0],O=f[1],v=Object(a.useState)({ref_dats:null,components:null}),g=Object(u.a)(v,2),C=g[0],k=g[1],y=Object(a.useState)(t),S=Object(u.a)(y,2),w=S[0],N=S[1],L=[["light","\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043e\u0441\u0432\u0435\u0449\u0435\u043d\u0438\u044f",{type:"int"}],["Tamb_degC","Tamb_degC",{type:"int"}],["latitude","latitude",{type:"float"}],["longitude","longitude",{type:"float"}]];Object(a.useEffect)((function(){if(null===s)return!0;var e=function(e){return function(e){var t,n=[],a=Object(p.a)(L);try{for(a.s();!(t=a.n()).done;){var c=t.value;n.push({name:c[1],min:{ref:i.a.createRef(),value:e[c[0]].min},max:{ref:i.a.createRef(),value:e[c[0]].max}})}}catch(r){a.e(r)}finally{a.f()}return n}(function(e){if(null===e||void 0===e){var t,n={min:"",max:""},a={},i=Object(p.a)(L);try{for(i.s();!(t=i.n()).done;)a[t.value[0]]=n}catch(c){i.e(c)}finally{i.f()}return a}return e}(e))}(s),t=e.map((function(e,t){return Object(h.jsx)(A,{name:e.name,min:e.min,max:e.max},t)}));k({ref_dats:e,components:t})}),[s,o]);var M=function(){"function"===typeof r&&r(t)},R={open:function(){l(Object(h.jsx)(z,{onClose:R.close.bind(I),onConfirm:M.bind(I)}))},close:function(){l(null)}},D=null===C.components?Object(h.jsx)(d.t,{size:"large"}):Object(h.jsxs)(d.h,{children:[m?Object(h.jsx)(d.j,{header:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",mode:"error",children:m}):null,C.components,Object(h.jsx)(d.g,{children:Object(h.jsx)(_,{height:"400px"})}),Object(h.jsx)(d.g,{children:Object(h.jsx)(d.c,{disabled:o,onClick:function(){var e=t,n=function(e){for(var t=function(e,t){var n=!1,a=void 0;return"int"===e.type&&(a=parseInt(t),n=isNaN(a)?"\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0446\u0435\u043b\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c":n),"float"===e.type&&(a=parseFloat(t),n=isNaN(a)?"\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u043c":n),n?[void 0,n]:void 0!==e.min&&a<e.min?[void 0,"\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 "+e.min.toString()]:void 0!==e.max&&a>e.max?[void 0,"\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 "+e.max.toString()]:[a,!1]},n={},a=0;a<e.length;a++){var i=L[a],c=t(i[2],e[a].min.ref.current.value),r=Object(u.a)(c,2),s=r[0],o=r[1];if(!1!==o)return O("\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 '"+i[1]+"' "+o),null;var l=t(i[2],e[a].max.ref.current.value),d=Object(u.a)(l,2),j=d[0],b=d[1];if(!1!==b)return O("\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 '"+i[1]+"' "+b),null;n[i[0]]={min:s,max:j}}return O(!1),n}(C.ref_dats);j||(e=function(e){return"string"===typeof e&&e.toString().trim().length>0?(O(!1),e.toString().trim()):(O("\u0418\u0434\u0435\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d"),null)}(w)),void 0!==n&&null!==n&&null!==e&&void 0!==e&&"function"===typeof c&&c(n,e)},size:"l",stretched:!0,children:o?Object(h.jsx)(d.t,{size:"small"}):void 0===s?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})})]});return Object(h.jsxs)(d.k,{separator:"hide",mode:"plain",children:[Object(h.jsx)(d.o,{fixed:!1,separator:!1,left:j?Object(h.jsx)(d.p,{onClick:R.open.bind(I),children:Object(h.jsx)(x.a,{})}):null,children:Object(h.jsx)(V,{name:n,isUpdated:j,setName:function(e){N(e)}})}),Object(h.jsx)("div",{className:"scrolling-form",children:D})]})},D=n(65),E=n.n(D).a.create({headers:{"Content-type":"application/json"},withCredentials:!0}),q="/platform-art-of-light",F=function(e){return"http://localhost:10880/proxy"+(e.startsWith("/")?e:"/"+e)};function J(){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"get",url:F("api/mock")}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"post",data:Object(f.a)({id:t},n),url:F("api/mock")}).then((function(e){return"ok"===e.data.status}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"delete",data:{ids:[t]},url:F("api/mock")}).then((function(e){return"ok"===e.data.status}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return G.apply(this,arguments)}function G(){return(G=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"post",url:F("/api/geocoder"),data:{lat:t,lng:n}}).then((function(e){try{return e.data.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.Address.formatted}catch(t){return console.log(t),"\u0410\u0434\u0440\u0435\u0441 \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d"}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"get",url:F("/api/sensor/list")}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(l.a)(o.a.mark((function e(t,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"post",url:F("/api/command"),data:{id:t,auto:n,level_light:a}}).then((function(e){try{return e.data}catch(t){return"error"}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=n(191),K=function(e){var t=e.onClick;return Object(h.jsx)(d.h,{children:Object(h.jsx)(d.k,{separator:"hide",mode:"plain",children:Object(h.jsx)("div",{className:"scrolling-form-no-header",children:Object(h.jsxs)(d.q,{icon:Object(h.jsx)(Y.a,{}),stretched:!0,children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0438\u043b\u0438 ",Object(h.jsx)(d.m,{onClick:t,href:"#",children:"\u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})})})})},Q=function(e){var t=e.id,n=e.globalSetModalView,i={view:!1,data:null,id:null,buttonLoadingState:!1,name:null},c=Object(a.useState)([]),r=Object(u.a)(c,2),s=r[0],j=r[1],b=Object(a.useState)([]),p=Object(u.a)(b,2),x=p[0],v=p[1],g=Object(a.useState)(i),C=Object(u.a)(g,2),k=C[0],y=C[1],S=function(e){if(null!==e){var t=s.find((function(t){return t.id===e.toString()})),n=JSON.parse(JSON.stringify(k));n.data=t,n.name=t.id,n.id=t.id,n.view=!0,y(n)}else y(Object(f.a)(Object(f.a)({},i),{},{name:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430",data:void 0,view:!0}))};return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:null!==(t=e.sent)&&void 0!==t&&Array.isArray(t)&&j(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){var e=s.map((function(e){return{id:e.id.toString(),name:e.id.toString()}}));v(e)}),[s]),Object(h.jsxs)(d.n,{id:t,children:[Object(h.jsx)(d.o,{children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(h.jsxs)("div",{className:"mocks_wrapper",children:[Object(h.jsx)("div",{className:"left",children:Object(h.jsx)(O,{after:Object(h.jsx)("div",{className:"ddd",children:Object(h.jsx)(m.a,{})}),onSelect:S,rows:x})}),Object(h.jsx)("div",{className:"right",children:k.view?Object(h.jsx)(R,{id:k.id,name:k.name,data:k.data,onDelete:function(e){y(i);var t=s.findIndex((function(t){return t.id===e.toString()}));-1!==t&&(s.splice(t,1),j(JSON.parse(JSON.stringify(s)))),function(e){return U.apply(this,arguments)}(e).then()},onSave:function(e,t){var n=k.id!==t;y(n?{view:!0,id:t,name:t,data:e,buttonLoadingState:!0}:Object(f.a)(Object(f.a)({},k),{},{buttonLoadingState:!0})),function(e,t){return T.apply(this,arguments)}(t,e).then((function(a){if(!0===a){var i=n?t:k.name;y({view:!0,id:t,name:i,data:e,buttonLoadingState:!1});var c=s.findIndex((function(e){return e.id===t.toString()}));-1!==c?s[c]=Object(f.a)({id:t},e):s.unshift(Object(f.a)(Object(f.a)({id:t},e),{},{name:t})),j([]),j(s)}}))},globalSetModalView:n,buttonLoadingState:k.buttonLoadingState}):Object(h.jsx)(K,{onClick:S.bind(undefined,null)})})]})]})},X=n(35),$=(n(176),n(177),n(194)),ee=n(195),te=n(196),ne=n(193),ae=n(43),ie=void 0;function ce(e){var t=document.querySelector("#link-to");t.href=e,t.click()}var re=function(e){var t=e.onClick,n=e.collapsed;return Object(h.jsx)("div",{onClick:t,className:"CompanyNameSidebarMenu",children:Object(h.jsx)(d.e,{children:Object(h.jsx)("h1",{children:n?Object(h.jsx)(ne.a,{}):"Art of Light"})})})},se=function(){var e=Object(a.useState)(function(){var e=ae.a.getItem("menuCollapsed");return null!==e&&(e=e.toString()),"true"!==e&&"false"!==e&&(ae.a.setItem("menuCollapsed","false"),e="false"),"true"===e}()),t=Object(u.a)(e,2),n=t[0],i=t[1],c=function(e){i(e),function(e){ae.a.setItem("menuCollapsed",e?"true":"false")}(e)};return Object(h.jsx)(X.c,{collapsed:n,width:270,className:"left-menu-sidebar",children:Object(h.jsx)(X.a,{iconShape:null,children:Object(h.jsxs)("div",{className:"container-menu",children:[Object(h.jsx)(re,{collapsed:n,onClick:function(){c(!n)}}),Object(h.jsx)(X.b,{onClick:ce.bind(ie,q+"/#/"),icon:Object(h.jsx)($.a,{}),children:"\u041a\u0430\u0440\u0442\u0430"}),Object(h.jsx)(X.b,{icon:Object(h.jsx)(ee.a,{}),children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432"}),Object(h.jsxs)(X.d,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",icon:Object(h.jsx)(te.a,{}),children:[Object(h.jsx)(X.b,{onClick:ce.bind(ie,q+"/#/mocks-settings/"),children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(h.jsx)(X.b,{children:"\u041f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430"})]}),Object(h.jsx)(d.f,{children:Object(h.jsxs)("div",{children:["v 0.1",Object(h.jsx)("a",{id:"link-to",href:"#",style:{display:"none"}})]})})]})})})},oe=n(198),le=n(31),ue=n.n(le),de=(n(178),"/platform-art-of-light/map-markers/"),je=new ue.a.Icon({iconUrl:de+"default.svg",iconRetinaUrl:de+"default.svg",iconAnchor:null,popupAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:new ue.a.Point(60,67),className:"leaflet-custom-icon"}),be=n(197),fe=(n(179),n(180),n(66)),me=n(21),he=n.n(me),Oe=void 0,pe=function(e){var t=e.checked,n=e.disabled,a=e.setChecked;return Object(h.jsxs)("div",{className:"auto-light",children:[Object(h.jsx)("div",{className:"auto-light__text",children:"\u0410\u0432\u0442\u043e\u044f\u0440\u043a\u043e\u0441\u0442\u044c"}),Object(h.jsx)("div",{className:"auto-light__switch",children:Object(h.jsx)(d.u,{disabled:n,onChange:a.bind(Oe,!t),defaultChecked:t,value:t})})]})},xe=function(e){var t=e.disabled,n=e.value,a=e.setValue;return Object(h.jsx)("div",{className:"level_light_control",children:Object(h.jsx)(d.g,{top:Object(h.jsx)("div",{className:"text",children:"\u042f\u0440\u043a\u043e\u0441\u0442\u044c"}),children:Object(h.jsx)(d.s,{disabled:t,min:0,max:100,step:1,value:n,onChange:function(e){return a(e)}})})})},ve=function(e){var t=e.temperature;return Object(h.jsxs)("div",{className:"auto-light",children:[Object(h.jsx)("div",{className:"text-temp",children:"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u043d\u0430 \u0443\u043b\u0438\u0446\u0435"}),Object(h.jsxs)("div",{className:"temperature",children:[t.toFixed(0)," \xb0\u0421"]})]})},ge=function(e){var t=e.name,n=e.min,a=e.max,i=e.value;return Object(h.jsx)("div",{className:"level_light_control indicator",children:Object(h.jsx)(d.g,{top:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"text",children:t}),Object(h.jsxs)("div",{className:"text__bottom",children:[i," / ",a]})]}),children:Object(h.jsx)(d.s,{disabled:!0,min:n,max:a,value:i})})})},Ce=function(e){var t=e.min,n=e.max,a=e.value;return Object(h.jsx)(ge,{name:"\u0420\u0435\u0441\u0443\u0440\u0441 \u043b\u0430\u043c\u043f\u044b",min:t,max:n,value:a})},ke=function(e){var t=e.min,n=e.max,a=e.value;return Object(h.jsx)(ge,{name:"\u0420\u0435\u0441\u0443\u0440\u0441 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430",min:t,max:n,value:a})},ye=function(e){var t=e.lat,n=e.lng,i=Object(a.useState)(null),c=Object(u.a)(i,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t+","+n,void 0===window.FunctionCustomLoadAddress&&(window.FunctionCustomLoadAddress={}),void 0==window.FunctionCustomLoadAddress[a]){e.next=6;break}s(window.FunctionCustomLoadAddress[a]),e.next=12;break;case 6:return s(Object(h.jsx)(d.t,{size:"small"})),e.next=9,Z(t,n);case 9:i=e.sent,window.FunctionCustomLoadAddress[a]=i,s(i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(h.jsx)("div",{className:"meta",children:Object(h.jsxs)(d.d,{disabled:!0,children:[Object(h.jsx)("div",{style:{overflowY:"scroll"},className:"info-marker",children:r}),Object(h.jsxs)("div",{className:"info-marker",children:[t.toFixed(4),", ",n.toFixed(4),Object(h.jsx)(fe.CopyToClipboard,{text:t+", "+n,children:Object(h.jsx)("span",{className:"info-marker-copy",children:Object(h.jsx)("img",{src:"/platform-art-of-light/map-leaflet/copy.svg",alt:"Copy.svg"})})})]})]})})},Se=function(e){var t=e.id,n=e.value,a=e.onChange;return Object(h.jsx)("div",{className:"header",children:Object(h.jsx)(d.d,{disabled:!0,after:Object(h.jsx)(d.u,{value:n,defaultChecked:n,onChange:a.bind(Oe,!n)}),children:Object(h.jsxs)("h1",{children:["ID ",t]})})})},we=function(e){var t=e.light,n=e.temperature,a=e.autoLight;return Object(h.jsx)("div",{className:"settings",children:Object(h.jsxs)(d.d,{disabled:!0,children:[Object(h.jsx)(pe,{disabled:a.disabled,checked:a.checked,setChecked:a.setChecked}),Object(h.jsx)(xe,{disabled:t.disabled,value:t.value,setValue:t.setValue}),Object(h.jsx)(ve,{temperature:n.temperature}),Object(h.jsx)(Ce,{max:500,value:300,min:0}),Object(h.jsx)(ke,{max:5e3,value:300,min:0})]})})},Ne=(he.a.shape({latitude:he.a.number.isRequired,longitude:he.a.number.isRequired}).isRequired,he.a.number.isRequired,he.a.instanceOf([he.a.number,he.a.string]).isRequired,he.a.bool.isRequired,he.a.number.isRequired,function(e){var t=e.data,n=e.onChangeCommand,i=Object(a.useState)(!0),c=Object(u.a)(i,2),r=c[0],s=c[1],o=Object(a.useState)(!0),l=Object(u.a)(o,2),j=l[0],b=l[1],f=Object(a.useState)(!1),m=Object(u.a)(f,2),O=m[0],p=m[1],x=function(e){M(e),n({auto:!e.disabled,level:void 0===e.value?0:e.value})},v=function(e){b(e),x({value:L.value,disabled:e})},g=Object(a.useState)(!0),C=Object(u.a)(g,2),k=C[0],y=C[1],S=function(e){y(e),b(!!e&&j),x({value:e?L.value:0,disabled:!e||j}),p(!e)},w=Object(a.useState)({value:0,disabled:!0}),N=Object(u.a)(w,2),L=N[0],M=N[1];Object(a.useEffect)((function(){b(t.autoLight),y(0!==t.light),M({value:t.light,disabled:0!==t.light&&t.autoLight}),s(!1)}),[]);var _=function(){return Object(h.jsxs)(d.k,{children:[Object(h.jsx)(Se,{id:t.uuid,value:k,onChange:S}),Object(h.jsx)(ye,{lat:t.positionMarker.latitude,lng:t.positionMarker.longitude}),Object(h.jsx)(we,{light:{value:L.value,disabled:L.disabled,setValue:function(e){x({value:e,disabled:L.disabled})}},autoLight:{checked:j,disabled:O,setChecked:v},temperature:{temperature:t.temperature}})]})};return Object(h.jsx)("div",{className:"PopupViewMapData",children:r?Object(h.jsx)(d.t,{size:"small"}):Object(h.jsx)(_,{})})}),Le=function(e){var t=e.dataShape,n=e.onChangeCommand,a=e.onClose;return Object(h.jsx)("div",{className:"PopupSettingWrapper",children:Object(h.jsx)(be.a,{onClose:a,position:[t.positionMarker.latitude,t.positionMarker.longitude],children:Object(h.jsx)(Ne,{data:t,onChangeCommand:n})})})},Me=void 0,_e=function(e){return null!==e&&void 0!==e},Ie=function(e){var t=e.coords,n=e.onClick;return Array.isArray(t)?t.map((function(e){return Object(h.jsx)(oe.a,{icon:je,position:[e.latitude,e.longitude],eventHandlers:{click:n.bind(Me,e.id)}},e.id)})):null},ze=function(e){var t=e.id,n=(e.globalSetModalView,Object(a.useState)([])),i=Object(u.a)(n,2),c=i[0],r=i[1],s=Object(a.useState)([]),j=Object(u.a)(s,2),b=j[0],f=j[1],m=Object(a.useState)(null),O=Object(u.a)(m,2),x=O[0],v=O[1];Object(a.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e(),setInterval((function(){return e()}),1e4)}),[]),Object(a.useEffect)((function(){var e,t=[],n=Object(p.a)(c);try{for(n.s();!(e=n.n()).done;){var a=e.value;_e(a.influx)&&_e(a.influx.ICCID)&&_e(a.influx.longitude)&&_e(a.influx.latitude)&&t.push({id:a.influx.ICCID,longitude:a.influx.longitude,latitude:a.influx.latitude})}}catch(i){n.e(i)}finally{n.f()}f(t)}),[c]);return Object(h.jsxs)(d.n,{id:t,children:[Object(h.jsx)(d.o,{children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(h.jsx)("div",{className:"mocks_wrapper",children:Object(h.jsxs)(_,{height:"100%",children:[Object(h.jsx)(Ie,{onClick:function(e){v(!0);var t=c.findIndex((function(t){return!(!_e(t.influx)||!_e(t.influx.ICCID))&&t.influx.ICCID===e.toString()}));if(-1===t)return!1;var n=c[t],a={latitude:n.influx.latitude,longitude:n.influx.longitude};v(Object(h.jsx)(Le,{onClose:v.bind(Me,null),dataShape:{positionMarker:a,temperature:n.influx.Tamb_degC,uuid:e.toString(),autoLight:void 0===n.command.auto,light:void 0===n.command?n.influx.level_light:n.command.level_light},onChangeCommand:function(t){var n=t.auto,a=t.level;console.log({uuid:e,auto:n,level:a}),function(e,t,n){return H.apply(this,arguments)}(e,n,a).then()}}))},coords:b}),x]})})]})},Ae=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=(t[0],t[1]),i=Object(a.useState)(null),c=Object(u.a)(i,2),r=c[0],s=c[1];Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(null);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var f=function(e,t){return Object(h.jsx)(d.v,{activePanel:e,children:t})};return Object(h.jsx)(j.a,{basename:"/",children:Object(h.jsxs)(d.b,{children:[Object(h.jsx)(se,{}),r,Object(h.jsxs)("div",{className:"Content",children:[Object(h.jsx)(b.a,{path:"/mocks-settings/",exact:!0,component:function(){return f("mocksSettings",Object(h.jsx)(Q,{globalSetModalView:s,id:"mocksSettings"}))}}),Object(h.jsx)(b.a,{path:"/",exact:!0,component:function(){return f("mainMap",Object(h.jsx)(ze,{globalSetModalView:s,id:"mainMap"}))}})]})]})})};r.a.render(Object(h.jsx)(Ae,{}),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.5ff2319b.chunk.js.map